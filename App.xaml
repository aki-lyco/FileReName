<Application x:Class="Explore.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             ShutdownMode="OnMainWindowClose">
	<Application.Resources>
		<ResourceDictionary>

			<!-- Shared theme dictionaries -->
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="/Themes/LightTheme.xaml"/>
				<ResourceDictionary Source="/Themes/ToolbarStyles.xaml"/>
			</ResourceDictionary.MergedDictionaries>

			<!-- ★ フォールバックの独自キーは置かない（LightTheme のキーと衝突させない） -->

			<!-- Settings アイコンボタン（MainWindow から参照されるキー） -->
			<Style x:Key="SettingsIconButton" TargetType="Button">
				<Setter Property="Width" Value="28"/>
				<Setter Property="Height" Value="28"/>
				<Setter Property="Padding" Value="0"/>
				<Setter Property="Background" Value="Transparent"/>
				<Setter Property="BorderThickness" Value="0"/>
				<!-- テーマ未読込でも安全な既定色を使用 -->
				<Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
				<Setter Property="ToolTip" Value="設定"/>
				<Setter Property="FontFamily" Value="Segoe MDL2 Assets"/>
				<Setter Property="FontSize" Value="16"/>
				<Setter Property="Content" Value="&#xE713;"/>
				<Setter Property="HorizontalContentAlignment" Value="Center"/>
				<Setter Property="VerticalContentAlignment" Value="Center"/>
				<Setter Property="Cursor" Value="Hand"/>
				<Setter Property="Template">
					<Setter.Value>
						<ControlTemplate TargetType="Button">
							<Border x:Name="Bg" Background="{TemplateBinding Background}" CornerRadius="4">
								<ContentPresenter
								  HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
								  VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
							</Border>
							<ControlTemplate.Triggers>
								<Trigger Property="IsMouseOver" Value="True">
									<Setter TargetName="Bg" Property="Background" Value="#11000000"/>
								</Trigger>
								<Trigger Property="IsEnabled" Value="False">
									<Setter Property="Opacity" Value="0.5"/>
								</Trigger>
							</ControlTemplate.Triggers>
						</ControlTemplate>
					</Setter.Value>
				</Setter>
			</Style>

			<!-- RangeBase 安全化（起動直後の Value 未設定で落ちないように） -->
			<Style TargetType="ProgressBar">
				<Setter Property="Minimum" Value="0"/>
				<Setter Property="Maximum" Value="100"/>
			</Style>
			<Style TargetType="Slider">
				<Setter Property="Minimum" Value="0"/>
				<Setter Property="Maximum" Value="100"/>
			</Style>

			<!-- ※ MergedDictionaries は App.xaml で読み込みます -->
		</ResourceDictionary>
	</Application.Resources>
</Application>
