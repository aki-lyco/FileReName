<?xml version="1.0" encoding="utf-8"?>
<UserControl x:Class="Explore.AiRenameView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignWidth="900" d:DesignHeight="600"
             AllowDrop="True"
             DragOver="OnDragOver"
             Drop="OnDrop">

	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="6"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<!-- ツールバー -->
		<StackPanel Grid.Row="0" Orientation="Horizontal" Margin="4,4,4,0">
			<StackPanel.Resources>
				<Style TargetType="Button" BasedOn="{StaticResource ToolbarButton}"/>
			</StackPanel.Resources>
			<Button Click="OnAddFiles" Content="ファイル追加…"/>
			<Button Click="OnSuggest" Content="候補作成" Style="{StaticResource ToolbarButton.Primary}"/>
			<Button Click="OnSelectAll" Content="すべて選択"/>
			<Button Click="OnApply" Content="選択を適用" Style="{StaticResource ToolbarButton.Primary}"/>
			<Button Click="OnClear" Content="クリア"/>
			<Button Click="OnCheckAI" Content="AI状態確認"/>
			<TextBlock Text="{Binding StatusText}" Margin="16,3,0,0" Foreground="Gray"/>
		</StackPanel>

		<Rectangle Grid.Row="1" Height="1" Fill="#33000000"/>

		<!-- データグリッド -->
		<DataGrid Grid.Row="2"
				  ItemsSource="{Binding Items}"
				  AutoGenerateColumns="False"
				  CanUserAddRows="False"
				  HeadersVisibility="Column"
				  IsReadOnly="False"
				  AlternatingRowBackground="#FFEFF6FF"
				  AlternationCount="2">
			<DataGrid.Columns>
				<DataGridCheckBoxColumn Header="適用"
										Binding="{Binding Apply, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
										Width="60"/>
				<DataGridTextColumn Header="元の名前"
									Binding="{Binding OriginalName}"
									Width="2*"/>
				<DataGridTextColumn Header="提案名（AI）"
									Binding="{Binding SuggestedName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
									Width="2*"/>
				<DataGridTextColumn Header="適用先プレビュー"
									Binding="{Binding PreviewFullPath}"
									Width="3*"/>
			</DataGrid.Columns>
		</DataGrid>

		<!-- 下部ヘルプ -->
		<TextBlock Grid.Row="3" Text="※ ファイルをここにドラッグ＆ドロップできます"
				   Margin="12,0,12,8" Foreground="#666">
			<TextBlock.Style>
				<Style TargetType="TextBlock">
					<Setter Property="Visibility" Value="Collapsed"/>
					<Style.Triggers>
						<DataTrigger Binding="{Binding Items.Count}" Value="0">
							<Setter Property="Visibility" Value="Visible"/>
						</DataTrigger>
					</Style.Triggers>
				</Style>
			</TextBlock.Style>
		</TextBlock>
	</Grid>
</UserControl>
